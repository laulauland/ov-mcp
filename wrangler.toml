name = "ov-mcp"
main = "packages/cloudflare-worker/src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# KV Namespaces for caching GTFS data
[[kv_namespaces]]
binding = "GTFS_CACHE"
id = "f1f8a39a19554b9fa733b48a1cb136c9"

# Environment variables
[vars]
ENVIRONMENT = "production"
GTFS_FEED_URL = "http://gtfs.ovapi.nl/gtfs-nl.zip"
REALTIME_FEED_URL = "http://gtfs.ovapi.nl/gtfsrt"

# Scheduled triggers for automatic GTFS updates
[triggers]
crons = ["0 3 * * SUN"]  # Every Sunday at 3am UTC

# Observability
[observability]
enabled = true

# Cloudflare Containers (Beta) - Simplified configuration
[containers]
name = "gtfs-processor"
dockerfile = "./Dockerfile"
entrypoint = ["/bin/gtfs-processor"]
